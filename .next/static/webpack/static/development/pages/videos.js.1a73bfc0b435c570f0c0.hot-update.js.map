{"version":3,"file":"static/webpack/static/development/pages/videos.js.1a73bfc0b435c570f0c0.hot-update.js","sources":["webpack:///./components/VideosIndex.js"],"sourcesContent":["import Fuse from 'fuse.js';\nimport { debounce } from 'lodash';\n// import LoadVideos from './LoadVideos';\nimport classnames from 'classnames';\n\nexport default class VideosIndex extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      videoId: null,\n      videos: props.videos,\n      resetMaxVideos: true,\n      inputValue: ''\n    };\n\n    this.asyncOnChange = debounce(this.asyncOnChange, 200);\n  }\n\n//   componentWillReceiveProps(nextProps) {\n//     this.setState({\n//       videos: nextProps.videos,\n//       resetMaxVideos: false\n//     });\n//   }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.videos !== prevState.videos) {\n          return {\n              videos: nextProps.videos\n          };\n      } else return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n      if (prevProps.videos !== this.props.videos) {\n          //Perform some operation here\n          this.setState({\n              videos: this.props.videos,\n              resetMaxVideos: false \n          });\n          this.classMethod();\n      }\n  }\n\n  get search() {\n    const { inputValue } = this.state;\n\n    return (\n      <div className='nd-search'>\n        <div className='input-wrapper'>\n          <input\n            onChange={(e) => { e.persist(); this.onInputChange(e.target.value); }}\n            onKeyPress={(e) => { e.key === 'Enter' && this.searchInput.blur()}}\n            placeholder='Search videos...'\n            tabIndex='1'\n            ref={(ref) => (this.searchInput = ref)}\n            value={inputValue}\n            spellCheck={false}\n          />\n          <span className='input-highlight'>\n            { inputValue.replace(/ /g, \"\\u00a0\") }\n          </span>\n          <span\n            className={classnames('cancel-input', { active: inputValue.length > 0})}\n            onClick={() => this.onInputChange('')}\n          >\n            x\n          </span>\n        </div>\n      </div>\n    )\n  }\n\n  asyncOnChange(value) {\n    if (value === '') {\n      this.setState({\n        videos: this.props.videos,\n        resetMaxVideos: true\n      });\n    } else {\n      const sortOptions = {\n        threshold: 0.3,\n        location: 0,\n        distance: 100,\n        maxPatternLength: 32,\n        minMatchCharLength: 1,\n        keys: ['title', 'content_tags']\n      }\n\n      const fuse = new Fuse(this.props.videos, sortOptions);\n\n      this.setState({\n        videos: fuse.search(value),\n        resetMaxVideos: true\n      });\n    }\n  }\n\n  onInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n\n    this.asyncOnChange(value);\n  }\n\n  get videos() {\n    const {\n      videos,\n      videoId,\n      resetMaxVideos\n    } = this.state;\n\n    return (\n      <div className='nd-videos'>\n        <div className='videos-header'>{ `Videos (${videos ? videos.length : '0'})` }</div>\n        <LoadVideos videos={videos} resetMaxVideos={resetMaxVideos}/>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        { this.search }\n        { this.videos }\n      </div>\n    );\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AA8FA;AACA;AADA;AACA;AAGA;AACA;AACA;AAjGA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAVA;AAWA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAQA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;AA+BA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AAEA;AACA;AACA;AAFA;AAIA;AACA;;;AAyBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;AApFA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AADA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;;;AAmCA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;AA9FA;AACA;AACA;AACA;AADA;AAGA;AACA;;;;AA3BA;AACA;;;;;;;;;;;;;;;;;A","sourceRoot":""}